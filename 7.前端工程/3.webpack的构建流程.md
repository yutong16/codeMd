# webpack的构建流程
webpack的运行流程是一个串行的过程，从启动到结束会依次执行以下的流程:
- ## 初始化阶段
  - **初始化参数** : 从配置文件，配置对象，`shell`脚本中读取参数，与默认配置结合得出最终输出的参数;
  - **创建编译器对象** : 用上一步得到的参数创建`Compiler`对象;
  - **初始化编译环境** : 包括注入内置插件，注册各种模块工厂，初始化RuleSet集合，加载配置的插件等;
  - **开始编译** : 执行`Compiler`对象的 `run` 方法;
  - **确定入口** : 根据配置中的`entry`找出所有的入口文件，调用`compilition.addEntry`方法将入口文件转换为`dependence`对象
- ## 构建阶段
  - **编译模块(make)** :根据 `entry`对应的`dependence`对象创建`module`对象，调用 loader 将模块转译为标准的 JS 内容，然后调用JS 解释器将内容转换为 **AST**对象，从中找出该模块依赖的模块， 再 `递归` 本步骤，直到所有的入口依赖的文件都经过本步骤处理
  - **完成模块编译** : 经过上一个步骤处理后，得到所有模块被翻译后的内容以及他们之间的`依赖关系图`
- ## 生成阶段
  - **输出资源(seal)** : 根据入口和模块之间的依赖关系，组装成一个个包含多个模块的`chunk`，再把每个`chunk`转换成一个单独的文件加入到输出列表，这步是可以修改输出内容最后的机会
  - **写入文件系统(emitAssets)** : 确定好输出内容后，根据配置确定输出路径和文件名，把文件内容写入到文件系统

### 术语名词  
    > Compiler对象: 编译管理器，当webpack启动后会自动创建该对象，该对象一直存活，直到webpack关闭。  
    > Compilition: 单次编辑过程的管理器，比如 `watch = true` 时，运行过程中只有一个Compiler对象，但是每次文件变更都需要触发文件编译时，都会创建一个新的 `compilition`对象
    > Dependence: 依赖对象, webpack基于该类型记录模块之间的依赖关系
    > Module : webpack 内容所有的资源都会以"module"对象形式存在，所有关于资源的操作，转译，合并 都是以 ‘module’为单位进行的
    > Chunk : 编译完成输出时，webpack 会将 moudle按照特定的规则组织成一个一个的chunk ，这种chunk 某种程度上和输出一一对应
    > Loader: 资源内容转换器，帮助webpack识别各类非js资源，然后转换成可读内容
    > Plugin: webpack会在编译过程中，特定的时间点广播一些特殊事件，插件监听这些事件，在响应事件中可以介入编译过程